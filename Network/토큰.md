# 토큰

## 정의

토큰은 인증 방식의 하나로, 서버가 아닌 클라이언트 측에 저장되는 암호화된 문자열이다. 이 문자열에는 인증과 권한 정보가 포함되어 있다.

## 동작 과정

1. 사용자는 인증 정보를 담아 서버에 로그인 요청을 한다.
2. 서버는 인증 정보를 확인하고, 해당 사용자의 인증 및 권한 정보를 비밀 키와 함께 토큰으로 암호화한다.
3. 암호화된 토큰은 클라이언트에게 전달된다(Authorization 헤더 또는 쿠키를 사용해서).
4. 클라이언트는 전달받은 토큰을 저장하고, 서버에 리소스를 요청할 때 이 토큰을 함께 전달한다.
5. 서버는 전달받은 토큰을 비밀 키를 이용하여 검증하고, 유효하다면 요청에 대한 응답 데이터를 전송한다.

## 장점

- **무상태성**: 서버는 사용자의 상태를 저장하지 않아도 된다.
- **확장성**: 토큰 기반 인증은 시스템 확장성을 높인다.
- **어디서나 생성 가능**: 토큰은 어디서나 생성할 수 있어서 유연하다.
- **권한 부여 용이**: 토큰에 권한 정보를 포함시킬 수 있어 권한 관리가 용이하다.

# JWT

## 정의

JWT(JSON Web Token)는 JSON 객체에 정보를 담고 이를 토큰으로 암호화하여 전송하는 기술이다. JWT는 세 부분(Header, Payload, Signature)으로 나뉘어진다.

## 구조

- **Header**: 토큰의 종류, 해시 알고리즘 등, 토큰 자체를 설명하는 정보를 담고 있다.
- **Payload**: 토큰에 담을 정보들(사용자의 정보, 권한 등)을 포함하고 있다.
- **Signature**: 토큰의 유효성 검증을 위한 문자열로, 헤더의 인코딩값, Payload의 인코딩값, 비밀키를 합친 후, 주어진 해시 알고리즘으로 해싱한 것이다.

## 한계

- **무상태성**: 서버는 토큰에 대한 상태를 저장하지 않기 때문에 토큰의 상태 관리가 클라이언트에게 완전히 의존한다.
- **유효 기간**: 토큰

은 유효 기간이 있어서 유효 기간이 지나면 재발급 받아야 한다.

- **토큰의 크기**: 토큰이 클라이언트에 저장되므로 토큰의 크기가 너무 크면 문제가 될 수 있다.

# Access Token과 Refresh Token

- **Access Token**: 서버에 접근하기 위한 토큰으로, 보통 24시간 정도의 짧은 유효기간이 설정된다.
- **Refresh Token**: 액세스 토큰이 만료되었을 때 새로운 액세스 토큰을 발급받기 위해 사용하는 토큰이다.

이 두 가지 토큰을 사용하면, 액세스 토큰이 만료되더라도 리프레시 토큰의 유효기간이 남아있다면 다시 로그인을 할 필요 없이 지속해서 인증 상태를 유지할 수 있다. 하지만 이 방식도 토큰이 탈취되면 보안 문제가 생길 수 있다.

결론적으로, 완벽한 보안 방법은 없다. 구현하려는 서비스에 어떤 인증 방식이 가장 적절한지를 판단하고 사용해야 한다.
